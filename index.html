<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>MetalliQuest — Cleaner Transition</title>

<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
<style>
/* ===== Reset ===== */
* { box-sizing: border-box; margin: 0; padding: 0; }
html, body { height: 100%; font-family: 'Roboto', sans-serif; }

/* Single shared background (fixed) so both panels appear over the same image */
body {
  background: url('https://northernmysticmedia.com/wp-content/uploads/2024/08/LoZ-Overlook-Scenery-v2-Thumbnail.jpg') center/cover no-repeat fixed;
  overflow: hidden; /* we'll handle scroll-like interactions programmatically for the "hop" effect */
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  color: #fff;
}

/* Accessibility: focus outlines and reduced-motion respects */
:focus { outline: 3px solid #ffd54f; outline-offset: 4px; }

@media (prefers-reduced-motion: reduce) {
  .glass-panel, .arrow { transition: none !important; animation: none !important; }
}

/* ===== Sections (containers) ===== */
section {
  position: relative;
  width: 100%;
  height: 100vh;
}

/* We'll stack panels in the same area (center) over the fixed background */
.panel {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  width: min(92%, 640px);
  max-width: 640px;
  padding: clamp(18px, 4vw, 36px);
  border-radius: 18px;
  background: rgba(255,255,255,0.10);
  -webkit-backdrop-filter: blur(14px);
  backdrop-filter: blur(14px);
  text-align: center;
  box-shadow: 0 10px 30px rgba(0,0,0,0.45);
  transition: transform 520ms cubic-bezier(.22,.9,.27,1), opacity 420ms ease;
  will-change: transform, opacity;
  pointer-events: auto;
}

/* combine baseline centering with additional translateY for animation */
.panel--hero { z-index: 2; }
.panel--second { z-index: 1; }

/* Initial offsets:
   - hero sits centered (translateY(0))
   - second starts slightly below center (translateY(40vh)) and invisible.
   Using 40-50vh keeps the second panel much closer so a very light scroll brings it center.
*/
.panel--hero { transform: translate(-50%, -50%) translateY(0); opacity: 1; }
.panel--second { transform: translate(-50%, -50%) translateY(40vh); opacity: 0; }

/* When active, we move panels to their target positions:
   - hero moves up slightly (-40vh) and fades
   - second moves to center translateY(0) and fades in
*/
.panel.moved-up { transform: translate(-50%, -50%) translateY(-40vh); opacity: 0; z-index:1; }
.panel.moved-center { transform: translate(-50%, -50%) translateY(0); opacity: 1; z-index:2; }

/* Content inside panels */
.panel img { width: 128px; height: 128px; object-fit: cover; border-radius: 12px; margin: 0 auto 16px; display:block; }
.panel h1 { font-size: clamp(1.15rem, 3.2vw, 1.9rem); margin-bottom: 8px; }
.panel p { color: #e8e8e8; font-size: clamp(.95rem, 2.6vw, 1.05rem); margin-bottom: 14px; line-height: 1.35; }

/* Buttons list */
.actions { display:flex; flex-direction:column; gap:12px; margin-top:10px; align-items:center; }
.btn {
  min-width:150px;
  padding:10px 16px;
  border-radius:12px;
  border:2px solid rgba(255,255,255,0.22);
  background: rgba(255,255,255,0.06);
  color:#fff;
  cursor:pointer;
  transition: background .18s ease, transform .08s ease;
}
.btn:active { transform: translateY(1px); }
.btn:hover { background: rgba(255,255,255,0.10); }

/* Arrow: no background, centered at bottom, adjusts with clamp for screen sizes */
.arrow {
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  bottom: clamp(18px, 4.5vh, 40px);
  font-size: clamp(1.35rem, 4.4vw, 2rem);
  color: #fff;
  background: transparent;
  border: none;
  cursor: pointer;
  display: inline-flex;
  align-items:center;
  justify-content:center;
  padding: 6px;
  line-height: 1;
  transition: transform .18s ease, opacity .2s ease;
  -webkit-tap-highlight-color: rgba(255,255,255,0.06);
}
.arrow:active { transform: translateX(-50%) translateY(3px); }

/* subtle bounce but still small and respecting reduced-motion */
@keyframes small-bounce {
  0%,20%,50%,80%,100%{transform:translateX(-50%) translateY(0);}
  40%{transform:translateX(-50%) translateY(6px);}
  60%{transform:translateX(-50%) translateY(3px);}
}
.arrow { animation: small-bounce 2.4s infinite; }

/* small screens */
@media (max-width:520px) {
  .panel { width: min(96%, 520px); padding: 16px; border-radius: 14px; }
  .panel img { width: 96px; height: 96px; margin-bottom: 12px; }
  .btn { min-width: 130px; }
}

/* make panels programmatically focusable */
.panel[tabindex="-1"]:focus { outline: 4px solid rgba(255,215,64,0.95); outline-offset: 4px; border-radius: 12px; }
</style>
</head>
<body>
  <!-- Hero (same fixed background) -->
  <section id="hero" aria-label="Welcome section" role="region">
    <div id="heroPanel" class="panel panel--hero" role="region" aria-labelledby="heroTitle" tabindex="-1">
      <img src="https://source.unsplash.com/240x240/?avatar" alt="MetalliQuest emblem">
      <h1 id="heroTitle">Welcome to MetalliQuest</h1>
      <p>Glass plateau with blurred background. Gently scroll or swipe to briefly hop to the next panel.</p>
    </div>
  </section>

  <!-- Second panel stacked in the same place -->
  <section id="second" aria-label="Explore section" role="region">
    <div id="secondPanel" class="panel panel--second" role="region" aria-labelledby="secondTitle" tabindex="-1">
      <h1 id="secondTitle">Explore More</h1>
      <p>This panel uses the same background and hops gently into the center when you scroll a little.</p>
      <div class="actions" role="group" aria-label="Navigation">
        <button class="btn" type="button">Home</button>
        <button class="btn" type="button">About</button>
        <button class="btn" type="button">Projects</button>
        <button class="btn" type="button">Contact</button>
      </div>
    </div>
  </section>

  <!-- bare arrow with no background, centered bottom -->
  <button id="arrow" class="arrow" aria-controls="secondPanel" aria-label="See more content">↓</button>

<script>
/*
  Behavior:
  - Single fixed background; panels hop over it.
  - Light scroll/swipe is enough to trigger transition.
  - Arrow is transparent and centered.
  - Keyboard navigation supported.
  - Respects prefers-reduced-motion (no animations when requested).
*/

const hero = document.getElementById('heroPanel');
const second = document.getElementById('secondPanel');
const arrow = document.getElementById('arrow');

let current = 0; // 0 = hero, 1 = second
let animating = false;
const reduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
const TRANS_MS = reduced ? 0 : 520; // match CSS transition

// Small thresholds so the user only needs a light scroll/swipe
const WHEEL_THRESHOLD = 8;   // px
const TOUCH_THRESHOLD = 18;  // px

function setAria() {
  hero.setAttribute('aria-hidden', current === 1 ? 'true' : 'false');
  second.setAttribute('aria-hidden', current === 0 ? 'true' : 'false');
}

// Bring second panel into center, push hero slightly up
function toSecond() {
  if (current === 1 || animating) return;
  animating = true;

  hero.classList.add('moved-up');
  second.classList.add('moved-center');

  // Move focus for screen readers
  setTimeout(() => {
    second.focus({preventScroll: true});
    current = 1;
    setAria();
    animating = false;
  }, TRANS_MS + 20);
}

// Return to hero
function toHero() {
  if (current === 0 || animating) return;
  animating = true;

  hero.classList.remove('moved-up');
  second.classList.remove('moved-center');

  setTimeout(() => {
    hero.focus({preventScroll: true});
    current = 0;
    setAria();
    animating = false;
  }, TRANS_MS + 20);
}

// Wheel: lightweight scroll triggers hop
window.addEventListener('wheel', function(e) {
  if (reduced) return; // don't override native behavior if reduced motion is preferred
  if (animating) { e.preventDefault(); return; }
  // Only vertical wheel matters
  if (Math.abs(e.deltaY) < WHEEL_THRESHOLD) return;
  if (e.deltaY > 0 && current === 0) {
    e.preventDefault();
    toSecond();
  } else if (e.deltaY < 0 && current === 1) {
    e.preventDefault();
    toHero();
  }
}, { passive: false });

// Touch swipe detection (mobile)
let startY = null;
window.addEventListener('touchstart', (ev) => {
  if (!ev.touches || ev.touches.length === 0) return;
  startY = ev.touches[0].clientY;
}, { passive: true });

window.addEventListener('touchend', (ev) => {
  if (reduced) return;
  if (startY === null) return;
  const endY = (ev.changedTouches && ev.changedTouches[0]) ? ev.changedTouches[0].clientY : null;
  if (endY === null) { startY = null; return; }
  const delta = startY - endY;
  if (Math.abs(delta) < TOUCH_THRESHOLD) { startY = null; return; }
  if (delta > 0 && current === 0) { // swipe up
    toSecond();
  } else if (delta < 0 && current === 1) { // swipe down
    toHero();
  }
  startY = null;
}, { passive: true });

// Keyboard controls
window.addEventListener('keydown', (e) => {
  // Avoid interfering when typing in inputs
  const active = document.activeElement;
  if (active && (active.tagName === 'INPUT' || active.tagName === 'TEXTAREA' || active.isContentEditable)) return;

  if (['ArrowDown','PageDown',' '].includes(e.key)) {
    if (current === 0) { e.preventDefault(); toSecond(); }
  } else if (['ArrowUp','PageUp'].includes(e.key)) {
    if (current === 1) { e.preventDefault(); toHero(); }
  } else if (e.key === 'Home') {
    e.preventDefault(); toHero();
  } else if (e.key === 'End') {
    e.preventDefault(); toSecond();
  }
});

// Arrow click
arrow.addEventListener('click', (ev) => {
  ev.preventDefault();
  if (current === 0) toSecond();
  else toHero();
});

// Initialize aria states
setAria();

// Keep transforms in sync on resize/rotate to avoid odd stuck visuals
window.addEventListener('resize', () => {
  // No recalculation necessary because offsets are viewport-based in CSS.
  // If an animation was in progress, end it cleanly:
  if (!reduced && animating) {
    // do nothing; animation will finish naturally
  }
});
</script>
</body>
</html>
