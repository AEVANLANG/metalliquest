<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>MetalliQuest — Cleaner & Accessible</title>

<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
<style>
/* ===== Reset ===== */
* { box-sizing: border-box; margin: 0; padding: 0; }
html, body { height: 100%; font-family: 'Roboto', sans-serif; }

/* Single fixed background shared by both panels */
body {
  background: url('https://northernmysticmedia.com/wp-content/uploads/2024/08/LoZ-Overlook-Scenery-v2-Thumbnail.jpg') center/cover no-repeat fixed;
  overflow: hidden; /* keep programmatic "hop" behavior */
  color: #fff;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce) {
  .panel, .arrow { transition: none !important; animation: none !important; }
}

/* Use focus-visible so mouse hover doesn't show the keyboard focus ring.
   This removes the yellow outline on hover while preserving keyboard focus outlines. */
:focus { outline: none; }
:focus-visible {
  outline: 3px solid rgba(0, 123, 255, 0.95);
  outline-offset: 4px;
  border-radius: 10px;
}

/* ===== Sections ===== */
section { position: relative; width: 100%; height: 100vh; }

/* ===== Centered panels stacked over same background ===== */
.panel {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  width: min(92%, 720px);
  max-width: 720px;
  padding: clamp(18px, 4vw, 36px);
  border-radius: 16px;
  background: rgba(255,255,255,0.08);
  -webkit-backdrop-filter: blur(14px);
  backdrop-filter: blur(14px);
  text-align: center;
  box-shadow: 0 10px 30px rgba(0,0,0,0.45);
  transition: transform 520ms cubic-bezier(.2,.9,.25,1), opacity 420ms ease;
  will-change: transform, opacity;
}

/* Hero: visible at center. Second: starts nearby so it's visible without zooming.
   Using a smaller offset (30vh) reduces the need to zoom massively. */
.panel--hero { z-index: 2; transform: translate(-50%, -50%) translateY(0); opacity: 1; }
.panel--second { z-index: 1; transform: translate(-50%, -50%) translateY(30vh); opacity: 0; }

/* Active states when user triggers the hop:
   - hero moves up a modest amount (-28vh) and fades
   - second moves to center (translateY(0)) and fades in
*/
.panel.moved-up { transform: translate(-50%, -50%) translateY(-28vh); opacity: 0; z-index:1; }
.panel.moved-center { transform: translate(-50%, -50%) translateY(0); opacity: 1; z-index:2; }

/* Panel content */
.panel img { width: 120px; height: 120px; object-fit: cover; border-radius: 12px; margin: 0 auto 14px; display:block; }
.panel h1 { font-size: clamp(1.15rem, 3.2vw, 1.9rem); margin-bottom: 8px; }
.panel p { color: #eaeaea; font-size: clamp(.98rem, 2.6vw, 1.05rem); margin-bottom: 12px; line-height: 1.35; }

/* Accessible buttons: larger tap targets and easy to see */
.actions { display:flex; flex-direction:column; gap:12px; margin-top:12px; align-items:center; }
.btn {
  min-width:180px;
  padding:12px 18px;
  border-radius:12px;
  border:2px solid rgba(255,255,255,0.18);
  background: rgba(255,255,255,0.06);
  color:#fff;
  cursor:pointer;
  font-size:1rem;
  transition: background .18s ease, transform .08s ease;
}
.btn:active { transform: translateY(1px); }
.btn:hover { background: rgba(255,255,255,0.10); }

/* On small screens make buttons full-width for easier tapping */
@media (max-width:520px) {
  .panel { width: min(96%, 520px); padding: 16px; border-radius: 12px; }
  .panel img { width: 96px; height: 96px; margin-bottom: 12px; }
  .btn { width: 100%; min-width: 0; padding:12px; font-size:1rem; }
}

/* Bare arrow: centered bottom, no background */
.arrow {
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  bottom: clamp(16px, 4.2vh, 36px);
  font-size: clamp(1.35rem, 4.4vw, 2rem);
  color: #fff;
  background: transparent;
  border: none;
  cursor: pointer;
  padding: 6px;
  line-height: 1;
  transition: transform .18s ease, opacity .2s ease;
  -webkit-tap-highlight-color: rgba(255,255,255,0.06);
}
.arrow:active { transform: translateX(-50%) translateY(3px); }

/* subtle bounce */
@keyframes small-bounce {
  0%,20%,50%,80%,100%{transform:translateX(-50%) translateY(0);}
  40%{transform:translateX(-50%) translateY(6px);}
  60%{transform:translateX(-50%) translateY(3px);}
}
.arrow { animation: small-bounce 2.4s infinite; }

/* ensure panels can be programmatically focused with a visible focus ring for keyboard users */
.panel[tabindex="-1"]:focus-visible { /* handled by :focus-visible above */ }

/* utility: hide visually but keep available for screen readers */
.sr-only {
  position: absolute !important;
  height: 1px; width: 1px;
  overflow: hidden; clip: rect(1px,1px,1px,1px);
  white-space: nowrap; border: 0; padding: 0; margin: -1px;
}
</style>
</head>
<body>
  <!-- Skip link -->
  <a class="sr-only" href="#main" id="skip">Skip to main content</a>

  <!-- Hero panel (centered) -->
  <section id="hero" aria-label="Welcome section" role="region">
    <div id="heroPanel" class="panel panel--hero" role="region" aria-labelledby="heroTitle" tabindex="-1">
      <img src="https://source.unsplash.com/240x240/?avatar" alt="MetalliQuest emblem">
      <h1 id="heroTitle">Welcome to MetalliQuest</h1>
      <p>Glass plateau with a shared background. Gently scroll or swipe; a light gesture will bring the next panel to the center.</p>
    </div>
  </section>

  <!-- Second panel stacked closely so it's visible without zoom -->
  <section id="second" aria-label="Explore section" role="region">
    <div id="secondPanel" class="panel panel--second" role="region" aria-labelledby="secondTitle" tabindex="-1">
      <h1 id="secondTitle">Explore More</h1>
      <p>Accessible actions with large tap targets and clear focus. The panel is close to the center so it doesn't require zooming to see.</p>
      <div class="actions" role="group" aria-label="Navigation">
        <button class="btn" type="button">Home</button>
        <button class="btn" type="button">About</button>
        <button class="btn" type="button">Projects</button>
        <button class="btn" type="button">Contact</button>
      </div>
    </div>
  </section>

  <!-- bare arrow glyph (no background) -->
  <button id="arrow" class="arrow" aria-controls="secondPanel" aria-label="See more content">↓</button>

<script>
/* Behavior:
   - second panel now starts much closer (30vh), so it's visible on normal zoom levels.
   - :focus-visible is used instead of a hover outline so the yellow ring won't appear when hovering.
   - accessibility: aria-hidden toggling, focus moves to newly active panel, large buttons.
   - light wheel/touch thresholds make transition easy with a small scroll or swipe.
*/

const hero = document.getElementById('heroPanel');
const second = document.getElementById('secondPanel');
const arrow = document.getElementById('arrow');

let current = 0; // 0 = hero, 1 = second
let animating = false;
const reduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
const TRANS_MS = reduced ? 0 : 520;

const WHEEL_THRESHOLD = 7;   // low threshold so small scroll triggers hop
const TOUCH_THRESHOLD = 16;  // small swipe threshold

function setAria() {
  hero.setAttribute('aria-hidden', current === 1 ? 'true' : 'false');
  second.setAttribute('aria-hidden', current === 0 ? 'true' : 'false');
}

function toSecond() {
  if (current === 1 || animating) return;
  animating = true;

  hero.classList.add('moved-up');
  second.classList.add('moved-center');

  setTimeout(() => {
    second.focus({preventScroll: true});
    current = 1;
    setAria();
    animating = false;
  }, TRANS_MS + 20);
}

function toHero() {
  if (current === 0 || animating) return;
  animating = true;

  hero.classList.remove('moved-up');
  second.classList.remove('moved-center');

  setTimeout(() => {
    hero.focus({preventScroll: true});
    current = 0;
    setAria();
    animating = false;
  }, TRANS_MS + 20);
}

// Wheel: lightweight scroll triggers
window.addEventListener('wheel', function(e) {
  if (reduced) return;
  if (animating) { e.preventDefault(); return; }
  if (Math.abs(e.deltaY) < WHEEL_THRESHOLD) return;

  if (e.deltaY > 0 && current === 0) {
    e.preventDefault();
    toSecond();
  } else if (e.deltaY < 0 && current === 1) {
    e.preventDefault();
    toHero();
  }
}, { passive: false });

// Touch swipe detection
let startY = null;
window.addEventListener('touchstart', (ev) => {
  if (!ev.touches || ev.touches.length === 0) return;
  startY = ev.touches[0].clientY;
}, { passive: true });

window.addEventListener('touchend', (ev) => {
  if (reduced) return;
  if (startY === null) return;
  const endY = (ev.changedTouches && ev.changedTouches[0]) ? ev.changedTouches[0].clientY : null;
  if (endY === null) { startY = null; return; }
  const delta = startY - endY;
  if (Math.abs(delta) < TOUCH_THRESHOLD) { startY = null; return; }
  if (delta > 0 && current === 0) toSecond();
  else if (delta < 0 && current === 1) toHero();
  startY = null;
}, { passive: true });

// Keyboard controls
window.addEventListener('keydown', (e) => {
  const active = document.activeElement;
  if (active && (active.tagName === 'INPUT' || active.tagName === 'TEXTAREA' || active.isContentEditable)) return;

  if (['ArrowDown','PageDown',' '].includes(e.key)) {
    if (current === 0) { e.preventDefault(); toSecond(); }
  } else if (['ArrowUp','PageUp'].includes(e.key)) {
    if (current === 1) { e.preventDefault(); toHero(); }
  } else if (e.key === 'Home') {
    e.preventDefault(); toHero();
  } else if (e.key === 'End') {
    e.preventDefault(); toSecond();
  }
});

// Arrow click
arrow.addEventListener('click', (ev) => {
  ev.preventDefault();
  if (current === 0) toSecond();
  else toHero();
});

// Init aria
setAria();
</script>
</body>
</html>
